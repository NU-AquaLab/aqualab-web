---
title: ";LOGIN: February 2010 Tam ING T he T Orre NT 51da v i d  C h o F Fn eS a n d"
authors:
  - ""
date: 2010-01-01
publication: ""
abstract: ""
url_pdf: "DChoffnes-USENIXLogin10.pdf"
featured: false
---

{{< spoiler text="Abstract" >}}

FaBián e. Bu Stamante taming the Torrent David R. Choffnes will receive his PhD this year from the Department of Electri - cal Engineering and Computer Science at Northwestern University. Not surprisingly, his research interests align with those of his advisor (below). In particular, he cur - rently focuses on designing, building, and evaluating large-scale, practical distributed systems. drchoffnes@eecs.northwestern.edu Fabián E. Bustamante is an associate profes - sor in the Department of Electrical Engineer - ing and Computer Science at Northwestern University. His research interests include operating systems and distributed systems, and networking in both wired and wireless settings. fabianb@eecs.northwestern.eduover the pa St decade, the peer-to- peer (P2P) model for building distributed systems has enjoyed incredible success and popularity, forming the basis for a wide variety of important Internet applications such as file sharing, voice-over-IP (VoIP), and video streaming. This success has not been universally welcomed. Internet Service Pro - viders (ISPs) and P2P systems, for example, have developed a complicated relationship that has been the focus of much media attention. While P2P bandwidth demands have yielded significant revenues for ISPs as users upgrade to broadband for improved P2P performance, P2P systems are one of their greatest and costliest traffic engineer - ing challenges, because peers establish con - nections largely independent of the Internet routing. Ono [4] is an extension to a popular BitTorrent client that biases P2P connections to avoid much of these costs without sacri - ficing, and potentially improving, BitTorrent performance. Most P2P systems rely on application-level rout - ing through an overlay topology built on top of the Internet. Peers in such overlays are typically con - nected in a manner oblivious to the underlying network topology and routing. These random con - nections can result in nonsensical outcomes where a peer—let’s say, in the authors’ own campus net - work in the Chicago suburbs—downloads content from a host on the West Coast even if the content is available from a much closer one in the Chicago area. This can not only lead to suboptimal perfor - mance for P2P users, but can also incur signifi - cantly larger ISP costs resulting from the increased interdomain (cross-ISP) traffic. The situation has driven ISPs to the unfavorable so - lution of interfering with users’ P2P traffic—shap - ing, blocking, or otherwise limiting it—all with questionable effectiveness. For instance, when early P2P systems ran over a fixed range of ports (e.g., 6881–89 for BitTorrent), ISPs attempted to shape traffic directed toward those ports. In response, P2P systems have switched to nonstandard ports, often selected at random. More advanced ISP strate - gies, such as deep packet inspection to identify and shape P2P-specific flows, have resulted in P2P cli - ents that encrypt their connections. Recently, some 52 ;LOGIN: v OL. 35, NO. 1ISPs have attempted to reduce P2P traffic by placing caches at ISP network edges or by using network appliances for spoofing TCP RST messages, which trick clients into closing connections to remote peers. The legality of these approaches is questionable. By caching content, ISPs may become partici - pants in illegal distribution of copyrighted material, while interfering with P2P flows in a non-transparent way not only may break the law but also can lead to significant backlash. Given this context, it is clear that any general and sustainable solution requires P2P users to buy in. One possible approach would be to enable some form of cooperation be - tween P2P users and ISPs. ISPs could offer an oracle service [2] that P2P users rely on for selecting among candidate neighbor peers, thus allowing P2P systems to satisfy their own goals while providing ISPs with a mecha - nism to manage their traffic [7]. However, we have seen that P2P users and ISPs historically have little reason to trust each other. Beyond this, support - ing such an oracle requires every participating ISP to deploy and maintain infrastructure that participates in P2P protocols. To drive peer selection, Ono adopts a new approach based on recycled net - work views gathered at low cost from content distribution networks (CDNs) without additional path monitoring or probing. Biased peer selection ad - dresses a key network management issue for ISPs, obviating controversial practices such as traffic shaping or blocking. By relying on third-party CDNs to guide peer selection, Ono ensures well-informed recommendations (thus facilitating and encouraging adoption) while bypassing the potential trust is - sues of direct cooperation between P2P users and ISPs. We have shown that peers selected based on this information are along high-quality paths to each other, offering the necessary performance incen - tive for large-scale adoption. At the end of July 2009, Ono had been installed more than 630,000 times by users in 200 countries. BitTorrent Basics Before describing Ono, we discuss how BitTorrent peers select neighbors for transferring content. A more complete description of the BitTorrent protocol can be found in the article by Piatek et al. [5]. BitTorrent distributes a file by splitting it into fixed-size blocks, called pieces, that are exchanged among the set of peers participating in a swarm. After receiving any full piece, a peer can upload it to other directly con - nected peers in the same swarm. To locate other peers sharing the same content, peers contact a tracker, im - plemented as a centralized or distributed service, that returns a random sub - set of available peers. By default, each peer initially establishes a number of random connections from the subset returned by the tracker. As the transfer progresses, downloading peers drop low-throughput connections and re - place them with new random ones. CDns as Oracles Ono biases peer connections to reduce cross-ISP traffic without negatively impacting, but indeed potentially improving, system performance. Ono’s peer recommendations are driven by recycled network views gathered at low cost from CDNs. CDNs such as Akamai or Limelight attempt to improve Web performance by delivering content to end users from multiple, geographically dispersed

{{< /spoiler >}}
